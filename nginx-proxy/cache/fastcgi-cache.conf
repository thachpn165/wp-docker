# ðŸš€ FastCGI Cache Configuration
fastcgi_cache_path /var/cache/nginx levels=1:2 keys_zone=WORDPRESS:100m inactive=60m;
fastcgi_cache_key "$scheme$request_method$host$request_uri";

server {
    set $no_cache 0;

    # Disable cache for logged-in users and comment authors
    if ($http_cookie ~* "wordpress_logged_in|comment_author") {
        set $no_cache 1;
    }

    location ~ \.php$ {
        fastcgi_cache WORDPRESS;
        fastcgi_cache_valid 200 60m;
        fastcgi_cache_bypass $no_cache;
        fastcgi_no_cache $no_cache;
        add_header X-FastCGI-Cache $upstream_cache_status;
    }
}
